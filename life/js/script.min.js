document.addEventListener("DOMContentLoaded",(function(){const e=document.querySelector(".header"),t=document.querySelector(".header__search"),o=document.body,r=document.querySelector(".menu__icon"),i=document.querySelector(".menu__body-close"),a=document.querySelector(".menu__body"),n=document.querySelector(".header__form"),s=n.querySelector(".header__form-close"),l=document.querySelector(".header__form-input"),c=document.querySelector(".header__results"),d=window.innerWidth-document.querySelector(".wrapper").offsetWidth+"px",p=document.querySelectorAll("[data-choose]"),u=document.querySelectorAll(".filter"),m=document.querySelectorAll("[data-multiply]"),g={Android:function(){return navigator.userAgent.match(/Android/i)},BlackBerry:function(){return navigator.userAgent.match(/BlackBerry/i)},iOS:function(){return navigator.userAgent.match(/iPhone|iPad|iPod/i)},Opera:function(){return navigator.userAgent.match(/Opera Mini/i)},Windows:function(){return navigator.userAgent.match(/IEMobile/i)},any:function(){return g.Android()||g.BlackBerry()||g.iOS()||g.Opera()||g.Windows()}};if(g.any()){document.body.classList.add("_touch");let e=document.querySelectorAll(".menu__arrow");if(e.length>0)for(let t=0;t<e.length;t++){const o=e[t];o.addEventListener("click",(function(e){o.parentElement.classList.toggle("_active")}))}}else o.classList.add("_pc");function y(){o.style.marginRight=d}function _(){o.style.marginRight=""}r&&r.addEventListener("click",(function(e){o.classList.add("_lock"),r.classList.add("_active"),a.classList.add("_active")})),i&&i.addEventListener("click",(function(e){o.classList.remove("_lock"),r.classList.remove("_active"),a.classList.remove("_active")})),window.addEventListener("scroll",()=>{let t=window.scrollY,r=document.querySelector(".header__topline").offsetHeight,i=document.querySelector(".header").offsetHeight;t>r&&(e.classList.add("fixed"),e.style.top=-r+"px",o.style.paddingTop=i+"px"),t<r&&(e.classList.remove("fixed"),e.style.top="",o.style.paddingTop="")}),t.addEventListener("click",()=>{n.classList.add("visible"),o.classList.add("covered"),o.classList.add("_lock"),y()}),s.addEventListener("click",()=>{n.classList.remove("visible"),o.classList.remove("covered"),o.classList.remove("_lock"),c.classList.remove("visible"),_()});l.addEventListener("input",e=>{e.target.value.length>0?(async e=>{const t=await fetch(e);if(!t.ok)throw new Error(`Ошибка по адресу ${e}, статус ошибки ${t.status}`);return await t.json()})("https://fakestoreapi.com/products/").then(e=>{console.log(e),c.classList.add("visible")}):c.classList.remove("visible")});const f=document.querySelector(".feedback");if(f&&f.addEventListener("click",e=>{e.target.matches(".item-feedback__btn")&&e.target.closest(".item-feedback").classList.toggle("expanded")}),document.querySelector("#map")){let e;ymaps.ready((function(){e=new ymaps.Map("map",{center:[59.900504775127686,30.31272717591858],zoom:10}),e.controls.remove("geolocationControl"),e.controls.remove("searchControl"),e.controls.remove("trafficControl"),e.controls.remove("typeSelector"),e.controls.remove("fullscreenControl"),e.controls.remove("rulerControl"),e.behaviors.disable(["scrollZoom"]),e.geoObjects.add(new ymaps.Placemark([59.900504775127686,30.31272717591858],{},{})).add(new ymaps.Placemark([59.85575793467128,30.2243752116394],{},{}))})),document.querySelectorAll(".showrooms__adress").forEach(t=>{t.addEventListener("click",t=>{let o=t.target.dataset.coordinates.slice(1,-1).split(",").map(e=>+e);e.setCenter(o,17)})})}if(document.querySelector(".showrooms__table")){document.querySelectorAll("tr").forEach(e=>{const t=e.querySelector(".showrooms__tel");window.matchMedia("(max-width: 475px)").matches&&(e.insertAdjacentHTML("afterbegin",`\n                <td>${t.innerHTML}</td>\n              `),t.style.display="none")})}if(document.querySelector(".product-configs__expand")){const e=document.querySelector(".product-configs__expand"),t=document.querySelector(".product-configs__list");e.addEventListener("click",()=>{t.classList.toggle("collapsed")})}if(document.querySelector("#price")){let e=document.querySelector("#price").innerHTML;m&&m.forEach(t=>{t.addEventListener("click",o=>{!function(t){let o=document.querySelector("#price"),r=+e*t;o.innerHTML=r.toString()}(+t.dataset.multiply)})})}if(p.forEach(e=>{e.addEventListener("click",t=>{if(t.target.matches("button")){e.querySelector(".current").classList.remove("current"),t.target.classList.add("current")}})}),u&&u.forEach(e=>{e.addEventListener("click",(function(){let t=e.getAttribute("data-filter"),o=document.querySelectorAll(`.configurator__colors li:not([data-filter='${t}'])`),r=document.querySelectorAll(`.configurator__colors li[data-filter='${t}']`);"all"==t&&(o=[],r=document.querySelectorAll(".projects [data-filter]")),o.forEach(e=>{e.classList.add("hide"),e.classList.remove("show")}),r.forEach(e=>{e.classList.remove("hide"),e.classList.add("show")})}))}),document.querySelectorAll(".orientation-block__btns")){document.querySelectorAll(".orientation-block__btns").forEach(e=>{e.addEventListener("click",t=>{if(t.target.matches("button")){e.querySelector(".current").classList.remove("current"),t.target.classList.add("current")}})})}if(document.querySelector("[data-hystmodal")){new HystModal({linkAttributeName:"data-hystmodal",beforeOpen:function(){y()},afterClose:function(){_()}})}if(document.querySelector(".header__topline-container")&&new Splide(".header__topline-container",{pagination:!1,arrows:!1,autoWidth:!0,gap:"50px",breakpoints:{720:{gap:15}}}).mount(),document.querySelector(".hero__slider")&&new Splide(".hero__slider",{arrows:!1,autoplay:!0}).mount(),document.querySelector(".models__slider")&&new Splide(".models__slider",{arrows:!1,autoWidth:!0,pagination:!1,gap:10}).mount(),document.querySelector(".toprated__slider")&&new Splide(".toprated__slider",{arrows:!1,autoWidth:!0,pagination:!0,perMove:1,type:"loop",gap:30,breakpoints:{375:{gap:30,autowidth:!1,perPage:1,focus:"center"}}}).mount(),document.querySelector(".collections__slider")&&new Splide(".collections__slider",{arrows:!0,autoWidth:!0,pagination:!1,perMove:1,type:"loop",gap:30,breakpoints:{1200:{arrows:!1,pagination:!0}}}).mount(),document.querySelector(".projects__slider")&&new Splide(".projects__slider",{arrows:!0,pagination:!1,perMove:1,perPage:3,gap:30,type:"loop",breakpoints:{1200:{arrows:!1,pagination:!0},960:{arrows:!1,perPage:2,pagination:!0},720:{arrows:!1,perPage:1,pagination:!0}}}).mount(),document.querySelector(".feedback__slider")){new Splide(".feedback__slider",{arrows:!1,pagination:!1,perMove:1,perPage:2,gap:180,autoplay:!0,speed:800,interval:3e3,type:"loop",autoHeight:!0,breakpoints:{1200:{gap:30},720:{perPage:1}}}).mount().on("move",()=>{document.querySelectorAll(".item-feedback.expanded").forEach(e=>{e.classList.remove("expanded")})})}if(document.querySelector(".sliders-block")){var h=new Splide(".bottom-carousel__slider",{rewind:!0,fixedWidth:164,fixedHeight:102,isNavigation:!0,gap:25,focus:"center",pagination:!1,cover:!0,arrows:!1,breakpoints:{375:{fixedWidth:66,fixedHeight:40}}}).mount();new Splide(".top-carousel__slider",{type:"fade",heightRatio:.5,pagination:!1,arrows:!1,cover:!0,breakpoints:{720:{heightRatio:.5}}}).sync(h).mount()}document.querySelector(".similar__wrapper")&&new Splide(".similar__wrapper",{perPage:3,gap:30,arrows:!0,pagination:!1,breakpoints:{960:{arrows:!1,perPage:2,pagination:!0},720:{arrows:!1,perPage:2,pagination:!0,gap:10}}}).mount(),document.querySelector(".collections-block__wrapper")&&new Splide(".collections-block__wrapper",{perPage:4,gap:30,arrows:!0,pagination:!1,type:"loop",perMove:1,breakpoints:{960:{arrows:!1,perPage:3,pagination:!0},720:{arrows:!1,perPage:2,pagination:!0,gap:10}}}).mount(),document.querySelector(".diploma__slider")&&new Splide(".diploma__slider",{autoWidth:!0,gap:"80px",arrows:!1,breakpoints:{1200:{gap:"30px"},768:{gap:"15px"}}}).mount(),document.querySelector(".sales__slider")&&new Splide(".sales__slider",{perPage:2,arrows:!1,gap:"35px",breakpoints:{768:{perPage:2,arrows:!1},540:{perPage:1.5},475:{perPage:1}}}).mount(),document.querySelector(".process__slider")&&new Splide(".process__slider",{perPage:3,gap:"20px",pagination:!0,breakpoints:{768:{perPage:2,arrows:!1},540:{perPage:1.5},475:{perPage:1}}}).mount(),document.querySelector(".showroom__slider")&&new Splide(".showroom__slider",{perPage:3,gap:"40px",arrows:!0,breakpoints:{768:{perPage:2,arrows:!1},540:{perPage:1.5},475:{perPage:1}}}).mount();const v=document.querySelectorAll("[data-spollers]");if(v.length>0){const e=Array.from(v).filter((function(e,t,o){return!e.dataset.spollers.split(",")[0]}));e.length>0&&w(e);const t=Array.from(v).filter((function(e,t,o){return e.dataset.spollers.split(",")[0]}));if(t.length>0){const e=[];t.forEach(t=>{const o={},r=t.dataset.spollers.split(",");o.value=r[0],o.type=r[1]?r[1].trim():"max",o.item=t,e.push(o)});let o=e.map((function(e){return"("+e.type+"-width: "+e.value+"px),"+e.value+","+e.type}));o=o.filter((function(e,t,o){return o.indexOf(e)===t})),o.forEach(t=>{const o=t.split(","),r=o[1],i=o[2],a=window.matchMedia(o[0]),n=e.filter((function(e){if(e.value===r&&e.type===i)return!0}));a.addListener((function(){w(n,a)})),w(n,a)})}function w(e,t=!1){e.forEach(e=>{e=t?e.item:e,t.matches||!t?(e.classList.add("_init"),S(e),e.addEventListener("click",L)):(e.classList.remove("_init"),S(e,!1),e.removeEventListener("click",L))})}function S(e,t=!0){const o=e.querySelectorAll("[data-spoller]");o.length>0&&o.forEach(e=>{t?(e.removeAttribute("tabindex"),e.classList.contains("_active")||(e.nextElementSibling.hidden=!0)):(e.setAttribute("tabindex","-1"),e.nextElementSibling.hidden=!1)})}function L(e){const t=e.target;if(t.hasAttribute("data-spoller")||t.closest("[data-spoller]")){const o=t.hasAttribute("data-spoller")?t:t.closest("[data-spoller]"),r=o.closest("[data-spollers]"),i=!!r.hasAttribute("data-one-spoller");r.querySelectorAll("._slide").length||(i&&!o.classList.contains("_active")&&function(e){const t=e.querySelector("[data-spoller]._active");t&&(t.classList.remove("_active"),b(t.nextElementSibling,500))}(r),o.classList.toggle("_active"),q(o.nextElementSibling,500)),e.preventDefault()}}}let b=(e,t=500)=>{e.classList.contains("_slide")||(e.classList.add("_slide"),e.style.transitionProperty="height, margin, padding",e.style.transitionDuration=t+"ms",e.style.height=e.offsetHeight+"px",e.offsetHeight,e.style.overflow="hidden",e.style.height=0,e.style.paddingTop=0,e.style.paddingBottom=0,e.style.marginTop=0,e.style.marginBottom=0,window.setTimeout(()=>{e.hidden=!0,e.style.removeProperty("height"),e.style.removeProperty("padding-top"),e.style.removeProperty("padding-bottom"),e.style.removeProperty("margin-top"),e.style.removeProperty("margin-bottom"),e.style.removeProperty("overflow"),e.style.removeProperty("transition-duration"),e.style.removeProperty("transition-property"),e.classList.remove("_slide")},t))},q=(e,t=500)=>e.hidden?((e,t=500)=>{if(!e.classList.contains("_slide")){e.classList.add("_slide"),e.hidden&&(e.hidden=!1);let o=e.offsetHeight;e.style.overflow="hidden",e.style.height=0,e.style.paddingTop=0,e.style.paddingBottom=0,e.style.marginTop=0,e.style.marginBottom=0,e.offsetHeight,e.style.transitionProperty="height, margin, padding",e.style.transitionDuration=t+"ms",e.style.height=o+"px",e.style.removeProperty("padding-top"),e.style.removeProperty("padding-bottom"),e.style.removeProperty("margin-top"),e.style.removeProperty("margin-bottom"),window.setTimeout(()=>{e.style.removeProperty("height"),e.style.removeProperty("overflow"),e.style.removeProperty("transition-duration"),e.style.removeProperty("transition-property"),e.classList.remove("_slide")},t)}})(e,t):b(e,t)}));